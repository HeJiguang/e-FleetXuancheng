## 数据库设计：


### 字典表 (Dictionary Tables)

#### 1. 部门表
用于统一管理所有部门信息。

- **表名**: `departments`
- **字段**:
    - `department_id` (主键, INT): 部门唯一ID。
    - `name` (VARCHAR, UNIQUE): 部门名称。

#### 2. 违法类型表
用于统一管理所有违法行为的描述。

- **表名**: `violation_types`
- **字段**:
    - `violation_type_id` (主键, INT): 违法类型唯一ID。
    - `description` (TEXT): 违法行为的详细描述。

#### 3. 维修单位表
用于统一管理所有维修单位信息。

- **表名**: `service_providers`
- **字段**:
    - `provider_id` (主键, INT): 维修单位唯一ID。
    - `name` (VARCHAR, UNIQUE): 维修单位名称。

---

### 业务数据表 (Business Data Tables)

#### 4. 车辆基本信息表
系统的核心表，存储每一辆车的基本信息。

- **表名**: `vehicles`
- **字段**:
    - `vehicle_id` (主键, INT/VARCHAR): 车辆的唯一编号。
    - `plate_number` (VARCHAR, UNIQUE): 车牌号。
    - `department_id` (INT, 外键): 关联到 `departments` 表，表示所属部门。
    - `manager` (VARCHAR): 车管员。
    - `brand_model` (VARCHAR): 品牌型号。
    - `displacement` (FLOAT): 排气量。
    - `capacity` (INT): 核载人数。
    - `registration_date` (DATE): 注册登记日期。
    - `purchase_price` (NUMERIC): 购置价格。
    - `notes` (TEXT): 备注信息。
    - `image_url` (VARCHAR): 车辆照片的相对路径 (例如: `/uploads/vehicle_images/xxx.png`)。

#### 5. 车辆违章数据表
用于存储每一条违章记录。

- **表名**: `violations`
- **字段**:
    - `violation_id` (主键, INT): 违章记录的唯一ID。
    - `plate_number` (VARCHAR, 外键): 车牌号，关联 `vehicles` 表。
    - `violation_time` (DATETIME): 违法时间。
    - `violation_location` (VARCHAR): 违法路段。
    - `violation_type_id` (INT, 外键): 关联到 `violation_types` 表。

#### 6. 车辆维保数据表
- **表名**: `maintenance`
- **字段**:
    - `maintenance_id` (主键, INT): 维保记录的唯一ID。
    - `plate_number` (VARCHAR, 外键): 车牌号，关联 `vehicles` 表。
    - `order_number` (VARCHAR): 订单号。
    - `provider_id` (INT, 外键): 维修单位ID，关联 `service_providers` 表。
    - `request_time` (DATETIME): 申请时间。
    - `delivery_time` (DATETIME): 出厂时间。
    - `current_mileage` (INT): 当前码表里程。
    - `last_maintenance_mileage` (INT): 上次维保里程。
    - `service_details` (TEXT): 服务内容。
    - `maintenance_cost` (NUMERIC): 维保费用。

#### 7. 车辆油耗月度汇总表
用于存储以月为单位的车辆油耗统计数据。

- **表名**: `monthly_fuel_summary`
- **字段**:
    - `summary_id` (主键, INT): 汇总记录的唯一ID。
    - `plate_number` (VARCHAR, 外键): 车牌号，关联 `vehicles` 表。
    - `year` (INT): 统计年份 (例如: 2025)。
    - `month` (INT): 统计月份 (例如: 1 代表一月)。
    - `total_fuel_cost` (NUMERIC): 当月总加油金额。
    - `total_fuel_amount` (DECIMAL): 当月总加油数量（升）。
    - `start_month_mileage` (INT): 月初里程数。
    - `end_month_mileage` (INT): 月末里程数。
    - `distance_driven` (INT): 当月行驶里程。
    - `avg_consumption_per_100km` (DECIMAL): 当月百公里油耗。
    - `card_number` (VARCHAR): 卡号 (如果适用)。
    - `notes` (TEXT): 备注。

---

### 关系图 (E-R Diagram) 概念

```
[departments] 1--* [vehicles]
[vehicles] *--* [violations]
[vehicles] *--* [maintenance]
[vehicles] *--* [monthly_fuel_summary]
[violation_types] 1--* [violations]
[service_providers] 1--* [maintenance]
```